import datetime
import os

User_Input = 'i'

def Mark_Attendance():
    print("Mark Attendance")
    
def Manage_Timetable():
    Student_ID = input("What is your student ID? ")
    filename = ('timetables_' + Student_ID + '.txt')
    print("a) Add Timetable")
    print("b) Update Timetable")
    print("c) Delete Timetable")
    print("d) Display Timetable")
    User_Input = str(input("Select one to proceed: "))
    # Add Courses
    if User_Input == 'a':
        Course_ID = input("Enter the ID of the course you want to take: ")
        with open(filename, 'a+') as f:
            f.seek(0)
            courses = f.read()
            if Course_ID in courses:
                print("You are already enrolled in this course.\n")
            elif Course_ID == 'BIO1024':
                f.write('BIO1024: 9am-10am, 12pm-1pm, 3pm-4pm\n')
                print("Course successfully added.\n")
            elif Course_ID == 'CHM1024':
                f.write('CHM1024: 10am-11am, 1pm-2pm, 4pm-5pm\n')
                print("Course successfully added.\n")
            elif Course_ID == 'PHY1024':
                f.write('PHY1024: 11am-12pm, 2pm-3pm, 5pm-6pm\n')
                print("Course successfully added.\n")
            elif Course_ID == 'ENG1024':
                f.write('ENG1024: 8am-9am\n')
                print("Course successfully added.\n")
            else:
                print("Invalid course ID.\n")
        f = open(filename, 'r')
        print(f.read())
        f.close()

    # Delete Courses
    elif User_Input == 'c':
        Course_ID = input("Enter the ID of the course you want to delete: ")
        with open(filename, 'r') as f:
            lines = f.readlines()
        modified_lines = [line for line in lines if Course_ID not in line]
        with open(filename, 'w') as f:
            found = False
            for line in lines:
                if Course_ID in line:
                    found = True
                else:
                    f.write(line)
            if found:
                print(f"Course with ID {Course_ID} has been deleted.\n")
            else:
                print(f"Course with ID {Course_ID} not found.\n")

    # Display Timetable
    elif User_Input == 'd':
        with open(filename, 'r') as f:
            lines = f.readlines()
        course_order = ['BIO', 'CHM', 'PHY', 'ENG']
        sorted_lines = sorted(lines, key=lambda line: [course_order.index(course[:3]) for course in line.split() if course[:3] in course_order])
        with open(filename, 'w') as f:
            f.writelines(sorted_lines)
        with open(filename, 'r') as f:
            print(f.read())
    else:
        print("Invalid option. Please select a valid option.\n")


def Check_Assignment():
    print("Check Assignment")

def Display():
    print("Display")

while User_Input != 'e':
    print("Menu:")
    print("a) Mark Attendance")
    print("b) Manage Timetables")
    print("c) Submit/Check Assignments")
    print("d) Display")
    print("e) Exit")
    User_Input = str(input("Select one to proceed: "))
    if User_Input == 'a':
        Mark_Attendance()
    elif User_Input == 'b':
        Manage_Timetable()
    elif User_Input == 'c':
        Check_Assignment()
    elif User_Input == 'd':
        Display()
    else:
